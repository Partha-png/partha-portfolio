.button {
  /* =========================================
     LIGHT MODE - Tasteful & Subtle Button
     BUT -> Dark Plane (#171717)
     ========================================= */
  
  /* Core Colors */
  --btn-color: #fafafa;      /* Neutral 50 (Button BG) */
  --btn-border: #e5e5e5;     /* Neutral 200 */
  --text-color: #171717;     /* Neutral 900 */
  
  /* SINGLE SOURCE OF TRUTH for Plane Color */
  --plane-fill-color: #171717; /* Solid Black in Light Mode */
  
  /* Deprecated/Mapped for safety */
  --left-plane-base: var(--plane-fill-color);
  --left-plane-fold: var(--plane-fill-color);
  --right-plane-base: var(--plane-fill-color);
  --right-plane-fold: var(--plane-fill-color);
  
  /* Applying PLANE COLOR to animation variables (Defaults) */
  --primary: var(--btn-color);
  --left-wing-background: var(--left-plane-base);
  --left-body-background: var(--left-plane-base);
  --right-wing-background: var(--right-plane-base);
  --right-body-background: var(--right-plane-base);
  
  /* Button uses subtle background */
  background: var(--btn-color);
  color: var(--text-color);
  border: 1px solid var(--btn-border);

  /* Deprecated generic vars, kept for safety */
  --primary-dark: #404040;
  --primary-darkest: #171717;
  
  /* Other Props */
  --text: var(--text-color);
  --text-opacity: 1;
  --success: var(--text-color);
  --shadow: transparent;
  --success-x: -12;
  --success-stroke: 80; /* Increased length for full path */
  --success-opacity: 0;
  --border-radius: 7;
  --overflow: hidden;
  --x: 0;
  --y: 0;
  --rotate: 0;
  --plane-x: 0;
  --plane-y: 0;
  --plane-opacity: 0; /* Hidden by default to prevent resting seams */
  --trails: rgba(0, 0, 0, 0.4); /* Stronger trails */
  --trails-stroke: 57;

  /* Wing Position Vars  (51/49 overlap to prevent gaps) */
  --left-wing-first-x: 0;
  --left-wing-first-y: 0;
  --left-wing-second-x: 50;
  --left-wing-second-y: 0;
  --left-wing-third-x: 0;
  --left-wing-third-y: 100;
  --left-body-first-x: 50;
  --left-body-first-y: 0;
  --left-body-second-x: 50;
  --left-body-second-y: 100;
  --left-body-third-x: 0;
  --left-body-third-y: 100;
  --right-wing-first-x: 50;
  --right-wing-first-y: 0;
  --right-wing-second-x: 100;
  --right-wing-second-y: 0;
  --right-wing-third-x: 100;
  --right-wing-third-y: 100;
  --right-body-first-x: 50;
  --right-body-first-y: 0;
  --right-body-second-x: 50;
  --right-body-second-y: 100;
  --right-body-third-x: 100;
  --right-body-third-y: 100;

  display: block;
  cursor: pointer;
  position: relative;
  padding: 8px 16px;
  min-width: auto;
  text-align: center;
  margin: 0;
  line-height: 24px;
  font-family: inherit;
  font-weight: 500;
  font-size: 14px;
  outline: none;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
  transition: all 0.3s;
  border-radius: 0.5rem;
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* =========================================
   DARK MODE - Tasteful & Subtle Button
   BUT -> White/Black Split Plane
   ========================================= */
:global(.dark) .button {
  /* Core Colors */
  --btn-color: #171717;      /* Neutral 900 (Button BG) */
  --btn-border: #262626;     /* Neutral 800 */
  --text-color: #fafafa;     /* Neutral 50 */
  
  /* SINGLE SOURCE OF TRUTH for Plane Color */
  --plane-fill-color: #fafafa; /* Solid White in Dark Mode */

  /* Deprecated/Mapped for safety */
  --left-plane-base: var(--plane-fill-color);
  --left-plane-fold: var(--plane-fill-color);
  --right-plane-base: var(--plane-fill-color);
  --right-plane-fold: var(--plane-fill-color);
  
  /* Applying PLANE COLOR to animation variables */
  --primary: var(--btn-color);
  --left-wing-background: var(--left-plane-base);
  --left-body-background: var(--left-plane-base);
  --right-wing-background: var(--right-plane-base);
  --right-body-background: var(--right-plane-base);
  
  /* Button uses subtle background */
  background: var(--btn-color);
  color: var(--text-color);
  border-color: var(--btn-border);

  /* Animation Shading Colors */
  --primary-dark: #d4d4d4;
  --primary-darkest: #a3a3a3;
  
  /* Text */
  --text: var(--text-color);
  --success: var(--text-color);
  
  --shadow: transparent;
  --trails: rgba(255, 255, 255, 0.5); 
}

.plane,
.trails {
  pointer-events: none;
  position: absolute;
}

.plane {
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  filter: drop-shadow(0 3px 6px var(--shadow));
  transform: translate(calc(var(--x) * 1px), calc(var(--y) * 1px)) rotate(calc(var(--rotate) * 1deg)) translateZ(0);
}

.left,
.right {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  opacity: var(--plane-opacity);
  transform: translate(calc(var(--plane-x) * 1px), calc(var(--plane-y) * 1px)) translateZ(0);
}

.left:before,
.left:after,
.right:before,
.right:after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: calc(var(--border-radius) * 1px);
  transform: translate(var(--part-x, 0.4%), var(--part-y, 0)) translateZ(0);
  z-index: var(--z-index, 2);
  background: var(--plane-fill-color); /* NUCLEAR OPTION: Force single color on all parts */
  clip-path: polygon(calc(var(--first-x, var(--left-wing-first-x)) * 1%) calc(var(--first-y, var(--left-wing-first-y)) * 1%), calc(var(--second-x, var(--left-wing-second-x)) * 1%) calc(var(--second-y, var(--left-wing-second-y)) * 1%), calc(var(--third-x, var(--left-wing-third-x)) * 1%) calc(var(--third-y, var(--left-wing-third-y)) * 1%));
}

.left:after {
  --part-x: -1%;
  --z-index: 1;
  --background: var(--left-body-background);
  --first-x: var(--left-body-first-x);
  --first-y: var(--left-body-first-y);
  --second-x: var(--left-body-second-x);
  --second-y: var(--left-body-second-y);
  --third-x: var(--left-body-third-x);
  --third-y: var(--left-body-third-y);
}

.right:before {
  --part-x: -1%;
  --z-index: 2;
  --background: var(--right-wing-background);
  --first-x: var(--right-wing-first-x);
  --first-y: var(--right-wing-first-y);
  --second-x: var(--right-wing-second-x);
  --second-y: var(--right-wing-second-y);
  --third-x: var(--right-wing-third-x);
  --third-y: var(--right-wing-third-y);
}

.right:after {
  --part-x: 0;
  --z-index: 1;
  --background: var(--right-body-background);
  --first-x: var(--right-body-first-x);
  --first-y: var(--right-body-first-y);
  --second-x: var(--right-body-second-x);
  --second-y: var(--right-body-second-y);
  --third-x: var(--right-body-third-x);
  --third-y: var(--right-body-third-y);
}

.trails {
  display: block;
  width: 33px;
  height: 64px;
  top: -4px;
  left: 16px;
  fill: none;
  stroke: var(--trails);
  stroke-linecap: round;
  stroke-width: 2;
  stroke-dasharray: 57px;
  stroke-dashoffset: calc(var(--trails-stroke) * 1px);
  transform: rotate(68deg) translateZ(0);
}

.defaultText {
  display: block;
  position: relative;
  z-index: 4;
  opacity: var(--text-opacity);
}

.successText {
  display: block;
  z-index: 0;
  position: absolute;
  left: 0;
  right: 0;
  top: 8px;
  transform: translateX(calc(var(--success-x) * 1px)) translateZ(0);
  opacity: var(--success-opacity);
  color: var(--success);
}

.successText svg {
  display: inline-block;
  vertical-align: top;
  width: 16px;
  height: 16px;
  margin: 4px 8px 0 0;
  fill: none;
  stroke-width: 3; /* Increased thickness */
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: 80px; /* Coverage for full icon path */
  stroke: var(--success);
  stroke-dashoffset: calc(var(--success-stroke) * 1px);
}

.button:disabled { opacity: 0.5; cursor: not-allowed; pointer-events: none; }
